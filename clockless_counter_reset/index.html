<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Counter</title>
    <script>
      window.process = { env: {} };
    </script>
    <script type="importmap">
      {
        "imports": {
          "@hop/hiphop": "/hiphop-client.mjs"
        }
      }
    </script>
  </head>
  <body>
    <div>
      <button onclick="mach.react({ A: 1 })">A</button>
      <button onclick="mach.react({ B: 1 })">B</button>
      <button onclick="mach.react({ Reset: 1 })">Reset</button>
    </div>
    <div id="console">0</div>
    
    <script type="module">
      import { mach } from "./counter.mjs";
      globalThis.mach = mach;
      mach.addEventListener("O", (evt) => {
         document.getElementById("console").innerHTML = evt.nowval;
      });
      // Optionally, trigger an initial reaction:
      mach.react();
    </script>
  </body>
</html>
