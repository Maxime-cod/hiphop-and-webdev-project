/*=====================================================================*/
/*    .../project/hop/3.7.x/node_modules/readlines/test/test.mjs       */
/*    -------------------------------------------------------------    */
/*    Author      :  Manuel Serrano                                    */
/*    Creation    :  Thu Nov 16 10:44:53 2023                          */
/*    Last change :  Thu Nov 16 11:13:45 2023 (serrano)                */
/*    Copyright   :  2023 Manuel Serrano                               */
/*    -------------------------------------------------------------    */
/*    Testing the readlines package                                    */
/*=====================================================================*/
"use strict";

/*---------------------------------------------------------------------*/
/*    import                                                           */
/*---------------------------------------------------------------------*/
import * as assert from "assert";
import { openSync, closeSync, readFileSync } from "fs";
import { readLines, readLinesGen } from "../lib/readlines.mjs";

describe('readLines()', function () {
   const file = import.meta.url.replace(/^file:[/][/]/, "");
   const fd = openSync(file, "r");

   if (fd) {
      try {
	 const ln = readLines(fd);
	 it('should return an array of strings', function () {
	    assert.equal(ln instanceof Array, true);
	 });
	 it('should return as many strings as lines', function () {
	    const l = readFileSync(file, "utf8");
	    assert.equal(ln.length, l.split("\n").length);
	 });
      } finally {
         closeSync(fd);
      }
   }
});
