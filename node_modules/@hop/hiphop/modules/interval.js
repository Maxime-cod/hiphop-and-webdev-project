"use strict";
export {interval};
export {Interval};
"use strict";
import * as $$hiphop from '@hop/hiphop';
const timeout=$$hiphop.MODULE({"%location":{"filename":"modules/interval.hh.js","pos":1283},"%tag":"module"},$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":1319},"direction":"OUT","name":"elapsed"}),$$hiphop.FRAME({"fun":function (){let duration;
let step;
let preval;
return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":1283},"%tag":"frame"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":1283},"%tag":"frame","apply":function (__frame){duration=((0 < __frame.length) ? (__frame[0]) : (undefined));
step=((1 < __frame.length) ? (__frame[1]) : (undefined));
preval=((2 < __frame.length) ? (__frame[2]) : (undefined));
}
}),(function (){let tmt=undefined;
return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":1339},"%tag":"let"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":1343},"%tag":"hop","apply":function (){tmt=false;
}
}),(function (){let ds=undefined;
return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":1359},"%tag":"let"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":1363},"%tag":"hop","apply":function (){ds=0;
}
}),(function (){let d=undefined;
return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":1374},"%tag":"let"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":1378},"%tag":"hop","apply":function (){d=0;
}
}),$$hiphop.EXEC({"%location":{"filename":"modules/interval.hh.js","pos":1392},"%tag":"async","elapsed":"","apply":function (){tmt=setTimeout((() => {return this.notify(preval + step);
}),step);
}
,"suspApply":function (){ds=Date.now();
if( tmt) {clearTimeout(tmt);
tmt=false;
}else {}
}
,"resApply":function (){const dr=Date.now() - ds;
if( ds < step) {tmt=setTimeout((() => {return this.notify(preval + step);
}),ds - step);
} else {this.notify(preval + step);
}}
,"killApply":function (){if( tmt) {clearTimeout(tmt);
tmt=false;
}else {}
}
}));
}
)());
}
)());
}
)());
}
,"%location":{"filename":"modules/interval.hh.js","pos":1283},"%tag":"module"}));
const basicInterval=$$hiphop.MODULE({"id":"basicInterval","%location":{"filename":"modules/interval.hh.js","pos":2072},"%tag":"module"},$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2114},"direction":"OUT","name":"elapsed"}),$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2130},"direction":"OUT","name":"state"}),$$hiphop.FRAME({"fun":function (){let duration;
let step;
return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":2072},"%tag":"frame"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":2072},"%tag":"frame","apply":function (__frame){duration=((0 < __frame.length) ? (__frame[0]) : (undefined));
step=((1 < __frame.length) ? (__frame[1]) : (undefined));
}
}),$$hiphop.EMIT({"%location":{"filename":"modules/interval.hh.js","pos":2153},"%tag":"EMIT","signame":"state","apply":function (){return "running";
}
}),$$hiphop.EMIT({"%location":{"filename":"modules/interval.hh.js","pos":2179},"%tag":"EMIT","signame":"elapsed","apply":function (){return 0;
}
}),$$hiphop.ABORT({"%location":{"filename":"modules/interval.hh.js","pos":2198},"%tag":"ABORT","immediate":false,"apply":function (){return ((() => {const elapsed=this.elapsed;
return elapsed.nowval >= duration;
})());
}
},$$hiphop.SIGACCESS({"signame":"elapsed","pre":false,"val":true,"cnt":false}),$$hiphop.LOOP({"%location":{"filename":"modules/interval.hh.js","pos":2241}},(function (__frame){return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":2250},"%tag":"run"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":2250},"%tag":"hop","apply":function (){__frame[0]=duration;
__frame[1]=step || 100;
__frame[2]=((() => {const elapsed=this.elapsed;
return elapsed.nowval;
})());
}
},$$hiphop.SIGACCESS({"signame":"elapsed","pre":false,"val":true,"cnt":false})),$$hiphop.RUN({"%location":{"filename":"modules/interval.hh.js","pos":2250},"%tag":"run","autocomplete":true,"module":timeout,"%frame":__frame}));
}
)([undefined,undefined,undefined]))),$$hiphop.EMIT({"%location":{"filename":"modules/interval.hh.js","pos":2329},"%tag":"EMIT","signame":"state","apply":function (){return "finished";
}
}));
}
,"%location":{"filename":"modules/interval.hh.js","pos":2072},"%tag":"module"}));
let Interval=$$hiphop.INTERFACE({"id":"Interval","%location":{"filename":"modules/interval.hh.js","pos":2580},"%tag":"interface"},$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2604},"direction":"IN","name":"reset"}),$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2617},"direction":"IN","name":"pause"}),$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2630},"direction":"OUT","name":"elapsed","init_func":function (){return 0;
}
}),$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2651},"direction":"OUT","name":"state","init_func":function (){return "uninitialized";
}
}),$$hiphop.SIGNAL({"%location":{"filename":"modules/interval.hh.js","pos":2683},"direction":"IN","name":"suspend"}));
const interval=$$hiphop.MODULE({"id":"interval","%location":{"filename":"modules/interval.hh.js","pos":2927},"%tag":"module"},$$hiphop.INTF({"%value":Interval,"mirror":false,"%location":{"filename":"modules/interval.hh.js","pos":2970},"%tag":"interface"}),$$hiphop.FRAME({"fun":function (){let duration;
let step;
return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":2927},"%tag":"frame"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":2927},"%tag":"frame","apply":function (__frame){duration=((0 < __frame.length) ? (__frame[0]) : (undefined));
step=((1 < __frame.length) ? (__frame[1]) : (undefined));
}
}),$$hiphop.WEAKABORT({"%location":{"filename":"modules/interval.hh.js","pos":2984},"%tag":"WEAKABORT","immediate":false,"apply":function (){return ((() => {const state=this.state;
return state.nowval === "finished";
})());
}
},$$hiphop.SIGACCESS({"signame":"state","pre":false,"val":true,"cnt":false}),$$hiphop.LOOPEACH({"%location":{"filename":"modules/interval.hh.js","pos":3032},"%tag":"LOOPEACH","immediate":false,"apply":function (){return ((() => {const reset=this.reset;
return reset.now;
})());
}
},$$hiphop.SIGACCESS({"signame":"reset","pre":false,"val":false,"cnt":false}),$$hiphop.FORK({"%location":{"filename":"modules/interval.hh.js","pos":3045},"%tag":"FORK"},$$hiphop.SUSPEND({"%location":{"filename":"modules/interval.hh.js","pos":3057},"immediate":false,"toggleApply":function (){return ((() => {const suspend=this.suspend;
return suspend.now;
})());
}
},$$hiphop.SIGACCESS({"signame":"suspend","pre":false,"val":false,"cnt":false}),$$hiphop.LOOPEACH({"%location":{"filename":"modules/interval.hh.js","pos":3099},"%tag":"LOOPEACH","immediate":false,"apply":function (){return ((() => {const reset=this.reset;
return reset.now;
})());
}
},$$hiphop.SIGACCESS({"signame":"reset","pre":false,"val":false,"cnt":false}),(function (__frame){return $$hiphop.SEQUENCE({"%location":{"filename":"modules/interval.hh.js","pos":3108},"%tag":"run"},$$hiphop.ATOM({"%location":{"filename":"modules/interval.hh.js","pos":3108},"%tag":"hop","apply":function (){__frame[0]=duration;
__frame[1]=step;
}
}),$$hiphop.RUN({"%location":{"filename":"modules/interval.hh.js","pos":3108},"%tag":"run","autocomplete":true,"module":basicInterval,"%frame":__frame}));
}
)([undefined,undefined]))),$$hiphop.LOOP({"%location":{"filename":"modules/interval.hh.js","pos":3209}},$$hiphop.AWAIT({"%location":{"filename":"modules/interval.hh.js","pos":3224},"%tag":"await","immediate":false,"apply":function (){return ((() => {const suspend=this.suspend;
return suspend.now;
})());
}
},$$hiphop.SIGACCESS({"signame":"suspend","pre":false,"val":false,"cnt":false})),$$hiphop.EMIT({"%location":{"filename":"modules/interval.hh.js","pos":3258},"%tag":"EMIT","signame":"state","apply":function (){return "suspended";
}
}),$$hiphop.AWAIT({"%location":{"filename":"modules/interval.hh.js","pos":3286},"%tag":"await","immediate":false,"apply":function (){return ((() => {const suspend=this.suspend;
return suspend.now;
})());
}
},$$hiphop.SIGACCESS({"signame":"suspend","pre":false,"val":false,"cnt":false})),$$hiphop.EMIT({"%location":{"filename":"modules/interval.hh.js","pos":3320},"%tag":"EMIT","signame":"state","apply":function (){return "running";
}
}))))));
}
,"%location":{"filename":"modules/interval.hh.js","pos":2927},"%tag":"module"}));

//# sourceMappingURL=modules/interval.js.map
