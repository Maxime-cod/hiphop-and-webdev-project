import * as $$hiphop from '@hop/hiphop';import * as hh from '@hop/hiphop';import { format } from 'util';const Instruments=['violin','piano','trumpet','sax'];
let makeAwait = function (instruments) {
return $$hiphop.FORK({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':180},'%tag':'fork'},instruments.map((val) => {
return $$hiphop.SEQUENCE({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':218},'%tag':'sequence'},((g249) => {
return $$hiphop.AWAIT({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':226},'%tag':'await','immediate':false,'apply':function () {
return ((() => {
return this[g249].nowval;
})());
}},$$hiphop.SIGACCESS({'signame':g249,'pre':false,'val':true,'cnt':false}));
})(`${val}IN`),$$hiphop.EMIT({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':270},'%tag':'emit','signame':`${val}OUT`,'%value':val}));
}));
};const prg=$$hiphop.MODULE({'id':'prg','%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':312},'%tag':'module'},Instruments.map((i) => {
return `${i}IN`;
}).map((n) => {
return $$hiphop.SIGNAL({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':333},'direction':'IN','name':n});
}),Instruments.map((i) => {
return `${i}OUT`;
}).map((n) => {
return $$hiphop.SIGNAL({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':381},'direction':'OUT','name':n});
}),$$hiphop.SEQUENCE({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/staging-fork.hh.js','pos':430},'%tag':'dollar'},makeAwait(Instruments)));
const mach=new hh.ReactiveMachine(prg);
mach.outbuf='';mach.debug_emitted_func=(emitted) => {
mach.outbuf+=format(emitted) + '\n';};mach.react();mach.react({'violinIN':true,'saxIN':true});mach.react({'pianoIN':true});mach.react();export { mach };
//# sourceMappingURL=/home/serrano/prgm/project/hiphop/hiphop/test/._staging-fork.js.map
