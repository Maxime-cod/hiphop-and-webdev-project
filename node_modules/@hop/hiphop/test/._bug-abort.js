import * as $$hiphop from '@hop/hiphop';'use @hop/hiphop';'use hopscript';import { ReactiveMachine } from '@hop/hiphop';const prg=$$hiphop.MODULE({'id':'prg','%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/bug-abort.hh.js','pos':90},'%tag':'module'},$$hiphop.SIGNAL({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/bug-abort.hh.js','pos':108},'direction':'IN','name':'A'}),$$hiphop.SIGNAL({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/bug-abort.hh.js','pos':117},'direction':'OUT','name':'C'}),$$hiphop.ABORT({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/bug-abort.hh.js','pos':128},'%tag':'abort','immediate':false,'apply':function () {
return ((() => {
const A=this.A;return A.now;
})());
}},$$hiphop.SIGACCESS({'signame':'A','pre':false,'val':false,'cnt':false}),$$hiphop.NOTHING({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/bug-abort.hh.js','pos':155},'%tag':'nothing'})),$$hiphop.EMIT({'%location':{'filename':'/home/serrano/prgm/project/hiphop/hiphop/test/bug-abort.hh.js','pos':165},'%tag':'emit','signame':'C','apply':function () {
return 123;
}}));
const mach=new ReactiveMachine(prg);
mach.outbuf='';mach.addEventListener('C',(e) => {
return mach.outbuf+=('got C: ' + e.nowval + '\n');
});mach.outbuf+=('1\n');mach.react({});mach.outbuf+=('2\n');mach.react({'A':111});mach.outbuf+=('3\n');console.error('BUG-ABORT should have failed.');export { mach };
//# sourceMappingURL=/home/serrano/prgm/project/hiphop/hiphop/test/._bug-abort.js.map
