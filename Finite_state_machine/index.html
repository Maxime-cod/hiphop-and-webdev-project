<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Finite State Machine Demo</title>
    <!-- Native import map -->
    <script type="importmap">
      {
        "imports": {
          "xstate": "https://esm.sh/xstate@4"
        }
      }
    </script>
    <style>
      /* Basic styling for the state display text */
      #state-display {
        font-weight: bold;
        font-size: 1.5em;
      }
      /* Styling for the state circles */
      .state {
        stroke: black;
        stroke-width: 2px;
        fill: #ccc;
        transition: fill 0.3s;
      }
      /* Highlight the active state */
      .active {
        fill: #4CAF50;
      }
      /* Style for state labels */
      .state-label {
        font-size: 14px;
        text-anchor: middle;
        fill: #333;
      }
    </style>
  </head>
  <body>
    <h1>Finite State Machine Demo</h1>
    <p>Current state: <span id="state-display">state1</span></p>
    
    <!-- SVG diagram of the state machine -->
    <svg width="400" height="300">
      <!-- State circles -->
      <circle id="state1" class="state active" cx="100" cy="100" r="30"></circle>
      <circle id="state2" class="state" cx="300" cy="100" r="30"></circle>
      <circle id="state3" class="state" cx="200" cy="250" r="30"></circle>
      
      <!-- State labels -->
      <text x="100" y="105" class="state-label">State 1</text>
      <text x="300" y="105" class="state-label">State 2</text>
      <text x="200" y="255" class="state-label">State 3</text>
      
      <!-- Arrows (optional): you can draw arrows between states if desired -->
      <!-- Example arrow from state1 to state2 -->
      <line x1="129" y1="95" x2="263" y2="95" stroke="black" marker-end="url(#arrow)"/>
      <text x="200" y="90" class="state-label">to2</text>
      <!--arroe state 2 to state 1-->
      <line x1="271" y1="105" x2="137" y2="105" stroke="black" marker-end="url(#arrow)"/>
      <text x="200" y="120" class="state-label">to1</text>
      <!-- Example arrow from state2 to state3 -->
      <line x1="290" y1="128" x2="229" y2="225" stroke="black" marker-end="url(#arrow)"/>
      <text x="275" y="180" class="state-label">to3</text>
      <!-- arrow state 3 to state 2-->
      <line x1="215" y1="224" x2="275" y2="129" stroke="black" marker-end="url(#arrow)"/>
      <text x="230" y="180" class="state-label">to2</text>
      <!-- Example arrow from state3 to state1 -->
      <line x1="177" y1="231" x2="116" y2="134" stroke="black" marker-end="url(#arrow)"/>
      <text x="128" y="180" class="state-label">to1</text>
      <!-- arrow state 1 to 3-->
      <line x1="119" y1="123" x2="179" y2="218" stroke="black" marker-end="url(#arrow)"/>
      <text x="167" y="180" class="state-label">to3</text>
      
      <!-- Define arrow marker -->
      <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto">
          <path d="M0,0 L0,6 L9,3 z" fill="#000" />
        </marker>
      </defs>
    </svg>
    
    <!-- Load the finite state machine module -->
    <script type="module" src="./main.js"></script>
  </body>
</html>
