<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Three-State FSM</title>
  <!-- Import map for XState -->
  <script type="importmap">
  {
    "imports": { "xstate": "https://esm.sh/xstate@4" }
  }
  </script>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <h1>Interactive Three-State FSM</h1>
    <!-- MODE SWITCHER + VALUE DISPLAY -->
    <div id="mode-bar" style="text-align:center; margin-bottom:20px;">
        <button data-mode="binary" class="mode-btn">Binary</button>
        <button data-mode="decimal" class="mode-btn active">Decimal</button>
        <button data-mode="hexadecimal" class="mode-btn">Hexadecimal</button>
      </div>
      <div id="value-display" style="text-align:center; font-size:1.5em; margin-bottom:20px;">
        0
      </div>
    
  <div class="main-container">
    <!-- Left: diagram -->
    <div class="diagram-panel">
      <svg class="diagram" viewBox="0 0 400 300">
        <defs>
            <!-- Smaller black marker for initial‐state arrow -->
            <marker id="initArrow" markerWidth="6" markerHeight="4"
                    refX="6" refY="2" orient="auto">
              <path d="M0,0 L6,2 L0,4 z" fill="#000" />
            </marker>
            <!-- your existing arrowhead marker -->
            <marker id="arrowhead" markerWidth="5" markerHeight="4"
                    refX="5" refY="2" orient="auto">
              <polygon points="0 0,5 2,0 4" fill="#888" />
            </marker>
            <!-- Highlighted arrowhead, same dimensions -->
            <marker id="arrowhead-highlight"
            markerWidth="5" markerHeight="4"
            refX="5" refY="2" orient="auto">
           <polygon points="0 0,5 2,0 4" fill="#FF5722" />
            </marker>

        </defs>
        
        <!-- Initial‐state marker for A -->
        <circle cx="60" cy="150" r="5" fill="#000" />
        <line x1="65" y1="150" x2="70" y2="150" stroke="#000" stroke-width="2" marker-end="url(#initArrow)" />

        <!-- States -->
        <circle id="sA" class="state" cx="100" cy="150" r="30" />
        <text x="100" y="155" text-anchor="middle" class="label">A</text>

        <circle id="sB" class="state" cx="280" cy="100" r="30" />
        <text x="280" y="105" text-anchor="middle" class="label">B</text>

        <circle id="sC" class="state" cx="280" cy="200" r="30" />
        <text x="280" y="205" text-anchor="middle" class="label">C</text>

        <!-- Arrows -->
        <line id="aToB" class="arrow" x1="130" y1="150" x2="250" y2="110" />
        <text x="180" y="130" text-anchor="middle" class="label">0</text>

        <line id="aToC" class="arrow" x1="130" y1="150" x2="250" y2="190" />
        <text id="label-aToC" x="180" y="180" text-anchor="middle" class="label">1–9</text>

        <!-- C → C self-loop (1–9) -->
        <path id="cLoop" class="arrow"
        d="M310,200 C360,240 360,130 306,187"  fill="none" marker-end="url(#arrowhead)"/>
        <text id="label-cLoop" x="320" y="200" text-anchor="middle" class="label">0–9</text>

      </svg>
    </div>

    <!-- Right: keypad -->
    <div class="keypad-panel">
        <div class="keypad"></div>
      <!-- Reset button -->
      <div style="text-align:center; margin-top:20px;">
      <button id="reset-btn" class="key-btn">Reset</button>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
